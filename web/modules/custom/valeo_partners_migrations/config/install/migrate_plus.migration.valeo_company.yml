id: valeo_company
label: Migrate Companies

migration_group: valeomiggroup

# Every migration must have a source plugin. Set this to the ID of the plugin to
# use.
#
# This is the extract phase of your migration.
source:
  plugin: d6_node
  node_type: company

# Every migration must also have a destination plugin, which handles writing
# the migrated data in the appropriate form for that particular kind of data.
# This value should be the ID of the destination plugin to use.
#
# This is the load phase of your migration.
destination:
  plugin: entity:node
  default_bundle: vp_type_company

#
# This is the transform phase of your migration.
process:
  type:
    plugin: default_value
    default_value: vp_type_company
  nid: nid
  vid: vid
  title: title
  uid: node_uid
  status: status
  created: created
  changed: changed
  comment: comment
  promote: promote
  sticky: sticky
  revision_uid: revision_uid
  revision_log: log
  revision_timestamp: timestamp

  field_vp_company_firstname: field_company_firstname
  field_vp_company_middleinitial: field_company_middleinitial
  field_vp_company_lastname: field_company_lastname
  field_vp_company_title: field_company_position

  field_vp_company_email:
    plugin: contact_email_import
    source: field_company_email

  field_vp_company_phone:
    plugin: contact_phone_import
    source: field_company_phone

  field_vp_company_phone_extension:
    plugin: contact_phone_import_extension
    source: field_company_phone

  field_vp_company_address:
    plugin: location_to_address
    source: field_company_address

  field_vp_company_position:
    plugin: contact_taxonomy_position

  field_vp_company_industry:
    plugin: company_taxonomy_industry
    source: field_client_industry
    
  field_vp_company_contact:
    plugin: company_taxonomy_contacts

    
  # field_vp_company_contact:
  #   plugin: sub_process
  #   source: field_company_contact
  #   process:
  #     field_vp_company_contact: 'field_company_contact/nid'