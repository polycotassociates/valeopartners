# The machine name for a migration. Also used by various CLI tools when
# referencing the migration as an argument for a command.
id: valeo_individual

# A human-friendly description of the migration. This is used by varous UI and
# CLI tools when showing a list of available migrations.
label: Migrate individuals

# Optional group for the migration. This is a feature provided by the
# migrate_plus module and allows for running an entire group of migrations
# together.
migration_group: valeomiggroup

# Every migration must have a source plugin. Set this to the ID of the plugin to
# use.
#
# This is the extract phase of your migration.
source:
  plugin: d6_node
  node_type: individual

# Every migration must also have a destination plugin, which handles writing
# the migrated data in the appropriate form for that particular kind of data.
# This value should be the ID of the destination plugin to use.
#
# This is the load phase of your migration.
destination:
  plugin: entity:node
  default_bundle: vp_type_individual

# Here's the meat of the migration - the processing pipeline. This describes how
# each destination field is to be populated based on the source data. For each
# destination field, one or more process plugins may be invoked.
#
# This is the transform phase of your migration.
process:
  type:
    plugin: default_value
    default_value: vp_type_individual
  nid: nid
  vid: vid
  title: title
  uid: node_uid
  status: status
  created: created
  changed: changed
  comment: comment
  promote: promote
  sticky: sticky
  revision_uid: revision_uid
  revision_log: log
  revision_timestamp: timestamp

  field_vp_first_name: field_individual_firstname
  field_vp_middle_name: field_individual_middlename
  field_vp_last_name: field_individual_lastname
  field_vp_email: field_individual_email

# Graduation and bar date are 4 digit year fields
# imported into the special "Year Only" contributed field
  field_vp_graduation:
    plugin: sub_process
    source: field_individual_graddate
    process:
      value:
        plugin: substr
        source: value
        start: 0
        length: 4

  field_vp_bar_date:
    plugin: sub_process
    source: field_individual_bardate
    process:
      value:
        plugin: substr
        source: value
        start: 0
        length: 4

  field_vp_individual_location:
    plugin: individual_taxonomy_location
    source: field_individual_city

  field_vp_position:
    plugin: individual_taxonomy_position

  field_vp_law_school:
    plugin: individual_taxonomy_law_school
    
  # field_vp_locationâ€Ž:
  #   plugin: individual_taxonomy_location
  #   source: field_individual_city

  field_vp_state_bar:
    plugin: individual_state_bar
    source: field_individual_statebar

  field_vp_practice_area_1:
    plugin: individual_practice_area_1
    source: field_individual_pa1

  field_vp_practice_area_2:
    plugin: individual_practice_area_2
    source: field_individual_pa2

  field_vp_practice_area_3:
    plugin: individual_practice_area_3
    source: field_individual_pa3



# Declare optional dependencies on another migration for this migration.
# This one has none.
# migration_dependencies:
#   required:
#     - valeo_paragraph_individual_firm

