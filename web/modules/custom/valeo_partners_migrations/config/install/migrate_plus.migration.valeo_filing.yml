id: valeo_filing
label: Migrate Filings

migration_group: valeomiggroup

# Every migration must have a source plugin. Set this to the ID of the plugin to
# use.
#
# This is the extract phase of your migration.
source:
  plugin: d6_node
  node_type: filing

# Every migration must also have a destination plugin, which handles writing
# the migrated data in the appropriate form for that particular kind of data.
# This value should be the ID of the destination plugin to use.
#
# This is the load phase of your migration.
destination:
  plugin: entity:node
  default_bundle: vp_type_filing

#
# This is the transform phase of your migration.
process:
  type:
    plugin: default_value
    default_value: vp_type_filing
  nid: nid
  vid: vid
  title: title
  uid: node_uid
  status: status
  created: created
  changed: changed
  comment: comment
  promote: promote
  sticky: sticky
  revision_uid: revision_uid
  revision_log: log
  revision_timestamp: timestamp

  field_vp_filing_description: field_case_filingdescription
  field_vp_filing_number: field_case_filingnumber

  # field_vp_filing_fee_dates:
  #   plugin: sub_process
  #   source: date_range
  #   process:
  #     value: date_range/start_date
  #     end_value: date_range/end_date

  #field_vp_filing_fee_dates/value: 'date_range/start_date'

  field_vp_filing_fee_dates:
    plugin: sub_process
    source: dates
    process:
      value: start_date
      end_value: end_date


  #   plugin: firm_fee_dates
  # field_vp_filing_fee_dates/end_value:
  #   plugin: firm_fee_dates_end

  # field_vp_filing_fee_dates/value:
  #   plugin: format_date
  #   from_format: 'Y-m-00\T00:00:00'
  #   to_format: 'Y-m-d\TH:i:s'
  #   source: 'date_start'

  # field_vp_filing_fee_dates/end_value:
  #   plugin: format_date
  #   from_format: 'Y-m-00\T00:00:00'
  #   to_format: 'Y-m-d\TH:i:s'
  #   source: 'date_end'

  # field_vp_filing_fee_dates/end_value:
  #   plugin: firm_fee_dates_end
  
  field_vp_filing_case:
    plugin: generic_taxonomy_item
    source: field_filing_case

# lando drush config-devel-export valeo_partners_migrations; lando drush migrate-rollback valeo_contact; lando drush migrate-import valeo_contact --feedback="100 items"; lando drush migrate-messages valeo_contact


# 13062,87264,102786
